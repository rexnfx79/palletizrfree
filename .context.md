# Palletizr Pro - Context Engineering Documentation

## Project Overview
Palletizr Pro is an advanced container loading optimization application built with React, Three.js, and sophisticated algorithms. It provides 3D visualization and intelligent pallet loading calculations for logistics optimization.

## Core Purpose
Transform complex container loading calculations into an intuitive, visual experience that maximizes shipping efficiency through:
- Real-time 3D visualization of loading scenarios
- Multiple optimization algorithms (auto-optimize, simple, interlocked, column stacking)
- Comprehensive validation and constraint handling
- Professional, iOS-style user interface

## Architecture Philosophy
The application follows a modular, component-based architecture with clear separation of concerns:
- **Presentation Layer**: React components with Tailwind CSS styling
- **Logic Layer**: Custom hooks and utility functions
- **Visualization Layer**: Three.js/React Three Fiber for 3D rendering
- **Data Layer**: Structured state management with validation

## Key Technologies
- **Frontend**: React 18, Vite, Tailwind CSS
- **3D Graphics**: Three.js, React Three Fiber, React Three Drei
- **State Management**: Custom hooks with React state
- **Build Tools**: Vite, ESLint, pnpm
- **UI Components**: Lucide React icons, custom UI components

## Project Structure
```
src/
├── components/           # React components organized by feature
│   ├── 3d/              # 3D visualization components
│   ├── steps/           # Wizard step components
│   ├── ui/              # Reusable UI components
│   └── *.jsx            # Shared components
├── hooks/               # Custom React hooks
├── lib/                 # Core business logic and utilities
├── assets/              # Static assets
└── *.jsx/.css          # Entry points and global styles
```

## Development Principles
1. **Component Modularity**: Each component has a single responsibility
2. **State Centralization**: Business logic centralized in custom hooks
3. **Type Safety**: Comprehensive input validation and error handling
4. **Performance**: Optimized for smooth 3D rendering and calculations
5. **Accessibility**: Responsive design and user-friendly interfaces

## Key Components

### Core Calculation Engine (`src/lib/calculator.js`)
- Advanced pallet loading algorithms
- Weight and dimension constraint validation
- Multiple optimization strategies
- Efficiency calculations and reporting

### 3D Visualization System (`src/components/3d/`)
- Interactive 3D scene rendering
- Real-time layout visualization
- Camera controls and layer management
- Performance-optimized rendering

### Wizard Flow (`src/components/steps/`)
- Step-by-step configuration process
- Progressive form validation
- Intuitive user experience
- Data persistence across steps

### State Management (`src/hooks/useCalculator.js`)
- Centralized application state
- Validation logic coordination
- Step navigation management
- Result calculation orchestration

## Business Logic Flow
1. **Input Collection**: Carton, pallet, container specifications
2. **Validation**: Dimensional and weight constraint checking
3. **Calculation**: Optimization algorithm execution
4. **Visualization**: 3D scene generation and rendering
5. **Results**: Efficiency metrics and recommendations

## Data Models
- **Carton**: Dimensions (L×W×H), weight, quantity
- **Pallet**: Type (Euro, Standard, American, Custom), dimensions
- **Container**: Type (20ft, 40ft, High Cube), capacity constraints
- **Settings**: Optimization strategy, weight limits, preferences

## AI Integration Context
This codebase is structured for optimal AI assistant interaction:
- Clear component boundaries and responsibilities
- Comprehensive inline documentation
- Predictable naming conventions
- Modular architecture for isolated changes
- Well-defined data flow patterns

## Development Workflow
1. **Feature Development**: Component-first approach
2. **Testing**: Manual testing with comprehensive validation
3. **Optimization**: Performance monitoring for 3D rendering
4. **Documentation**: Inline comments and architectural notes

## Performance Considerations
- 3D rendering optimization for smooth user experience
- Calculation algorithm efficiency for real-time results
- Memory management for large datasets
- Responsive design for various device capabilities

## Extension Points
- Additional optimization algorithms in `calculator.js`
- New 3D visualization features in `3d/` components
- Enhanced UI components in `ui/` directory
- Custom pallet types and container configurations

## Debugging and Troubleshooting
- Browser DevTools for React component inspection
- Three.js inspector for 3D scene debugging
- Console logging for calculation validation
- Error boundary implementation for graceful failures
